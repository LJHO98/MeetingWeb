<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Register</title>
    <script src="//t1.daumcdn.net/mapjsapi/bundle/postcode/prod/postcode.v2.js"></script>
    <script>

        function sample4_execDaumPostcode() {
            new daum.Postcode({
                oncomplete: function(data) {
                    var roadAddr = data.roadAddress;
                    var extraRoadAddr = '';

                    // 구 정보 추출 (sigungu 필드를 사용해 구 정보 가져오기)
                    var district = data.sigungu || ''; // sigungu 필드를 항상 구 정보로 사용
                    var bname = data.bname;

                    if(bname !== '' && /[동|로|가]$/g.test(bname)){
                        extraRoadAddr += bname;
                    }
                    if(data.buildingName !== '' && data.apartment === 'Y'){
                        extraRoadAddr += (extraRoadAddr !== '' ? ', ' + data.buildingName : data.buildingName);
                    }
                    if(extraRoadAddr !== ''){
                        extraRoadAddr = ' (' + extraRoadAddr + ')';
                    }

                    // document.getElementById('sample4_postcode').value = data.zonecode;
                    // document.getElementById("sample4_roadAddress").value = roadAddr;
                    // document.getElementById("sample4_jibunAddress").value = data.jibunAddress;
                    //
                    // if(roadAddr !== ''){
                    //     document.getElementById("sample4_extraAddress").value = extraRoadAddr;
                    // } else {
                    //     document.getElementById("sample4_extraAddress").value = '';
                    // }

                    document.getElementById("sigungu").value = district;


                    // var guideTextBox = document.getElementById("guide");
                    // if(data.autoRoadAddress) {
                    //     var expRoadAddr = data.autoRoadAddress + extraRoadAddr;
                    //     guideTextBox.innerHTML += ' (예상 도로명 주소 : ' + expRoadAddr + ')';
                    // } else if(data.autoJibunAddress) {
                    //     var expJibunAddr = data.autoJibunAddress;
                    //     guideTextBox.innerHTML += ' (예상 지번 주소 : ' + expJibunAddr + ')';
                    // }
                }
            }).open();
        }




    </script>
</head>
<body>

<h2>회원가입</h2>
<form th:action="@{/join}" th:object="${userDto}" method="post" enctype="multipart/form-data">

    <!-- 사용자 입력 필드 -->

    <!-- Profile Image 파일 업로드 필드 -->
    <label for="profileImage">Profile Image:</label>
    <input type="file" id="profileImage" th:field="*{profileImage}" accept="image/*"><br>

    <label th:for="userName">아이디:</label>
    <input type="text" th:field="*{userName}" /><br/>

    <label th:for="password">비밀번호:</label>
    <input type="password" th:field="*{password}" /><br/>

    <label th:for="email">이메일:</label>
    <input type="email" th:field="*{email}" /><br/>

    <label th:for="name">이름:</label>
    <input type="text" th:field="*{name}" /><br/>

    <label th:for="birthDate">생년월일:</label>
    <input type="date" th:field="*{birthdate}" /><br/>

    <label th:for="gender">성별:</label>
    <select th:field="*{gender}">
        <option value="MALE">남성</option>
        <option value="FEMALE">여성</option>
    </select><br/>

    <label>카테고리 선택:</label><br/>
    <div th:each="category : ${categories}">
        <input type="checkbox" th:field="*{selectedCategoryIds}"
               th:value="${category.groupCategoryId}" />
        <span th:text="${category.category}"></span><br/>
    </div>

<!--    <input type="text" id="sample4_postcode" placeholder="우편번호">-->
    <input type="button" onclick="sample4_execDaumPostcode()" value="우편번호 찾기"><br>
<!--    <input type="text" id="sample4_roadAddress" placeholder="도로명주소">-->
<!--    <input type="text" id="sample4_jibunAddress" placeholder="지번주소">-->
    <input type="text" id="sigungu" placeholder="시,군 또는 구">
<!--    <input type="text" id="sample4_detailAddress" placeholder="상세주소">-->
<!--    <input type="text" id="sample4_extraAddress" placeholder="참고항목">-->

    <button type="submit">회원가입</button>
</form>

</body>
</html>